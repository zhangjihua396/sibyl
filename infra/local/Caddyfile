# Sibyl Local Development - Caddy Reverse Proxy
# Proxies sibyl.local to Kong Gateway via port-forward on 8080

{
	# Use internal CA for automatic local TLS
	local_certs
	# Skip OCSP stapling for local dev
	ocsp_stapling off
	# Use non-conflicting ports
	http_port 8080
	https_port 443
}

sibyl.local {
	# Proxy to Kong via port-forward (started by Tilt)
	reverse_proxy localhost:8000 {
		# Pass through host header for Kong routing
		header_up Host sibyl.local
	}

	# Local TLS termination
	tls internal

	log {
		output stdout
		format console
	}
}
