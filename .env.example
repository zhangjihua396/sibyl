# =============================================================================
# Sibyl Configuration
# =============================================================================
# Copy this file to .env and update with your values
#
# Docker Compose Quick Start:
#   cp .env.example .env
#   # Edit .env with your values (especially JWT_SECRET and OPENAI_API_KEY)
#   docker compose -f docker-compose.prod.yml up -d
#   # Visit http://localhost:3337

# -----------------------------------------------------------------------------
# Port Configuration
# -----------------------------------------------------------------------------
# All ports are configurable for running multiple instances
SIBYL_SERVER_PORT=3334
SIBYL_WEB_PORT=3337
SIBYL_FALKORDB_PORT=6380
SIBYL_FALKORDB_BROWSER_PORT=3335
SIBYL_POSTGRES_PORT=5433

# FalkorDB Configuration
SIBYL_FALKORDB_HOST=localhost
SIBYL_FALKORDB_PASSWORD=conventions
SIBYL_FALKORDB_GRAPH_NAME=conventions

# -----------------------------------------------------------------------------
# AI Provider Configuration
# -----------------------------------------------------------------------------
# OpenAI (required for embeddings/semantic search)
SIBYL_OPENAI_API_KEY=sk-your-openai-key-here

# Anthropic (required for entity extraction and agents)
SIBYL_ANTHROPIC_API_KEY=sk-ant-your-anthropic-key-here

# LLM Configuration (for entity extraction via Graphiti)
SIBYL_LLM_PROVIDER=anthropic
SIBYL_LLM_MODEL=claude-haiku-4-5

# Embedding Model Configuration
SIBYL_EMBEDDING_MODEL=text-embedding-3-small
SIBYL_EMBEDDING_DIMENSIONS=1536

# Logging
SIBYL_LOG_LEVEL=INFO

# -----------------------------------------------------------------------------
# Auth (JWT + GitHub OAuth)
# -----------------------------------------------------------------------------
# Required for login and issuing access tokens
SIBYL_JWT_SECRET=dev-change-me

# GitHub OAuth (optional, required for /api/auth/github login flow)
# Create an OAuth app at https://github.com/settings/developers
SIBYL_GITHUB_CLIENT_ID=
SIBYL_GITHUB_CLIENT_SECRET=

# Public base URL for this server (used for OAuth callback URLs + invitation links)
SIBYL_SERVER_URL=http://localhost:3334

# Frontend URL to redirect to after login (can be overridden with ?redirect=...)
SIBYL_FRONTEND_URL=http://localhost:3337/

# Cookie overrides (optional)
# SIBYL_COOKIE_DOMAIN=example.com
# SIBYL_COOKIE_SECURE=true

# Local password auth (optional hardening)
# SIBYL_PASSWORD_PEPPER=change-me-in-prod
# SIBYL_PASSWORD_ITERATIONS=310000

# MCP auth (Bearer token required when enabled)
# - auto: require auth when SIBYL_JWT_SECRET is set
# - on: always require auth
# - off: disable auth for MCP endpoints
SIBYL_MCP_AUTH_MODE=auto
